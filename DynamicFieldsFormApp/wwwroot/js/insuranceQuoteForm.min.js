$(function(){function f(n){if($(".timeline-item").removeClass("active").removeClass("completed"),n>1)for(let t=1;t<n;t++)$("#step"+t+"Icon").addClass("completed");$("#step"+n+"Icon").addClass("active");n===2||n===3?($(h).show(),$(c).show(),$(o).show(),$(s).show(),$(u).show()):($(h).hide(),$(c).hide(),$(o).hide(),$(s).hide(),$(u).hide())}function l(){$(n).val()==="Yes"?$("#contactPreferences").show():$("#contactPreferences").hide();$(t).val()==="Yes"?$("#contactPreferencesStep3").show():$("#contactPreferencesStep3").hide();SaveFormData()}$("#step2, #step3, #fullNameWarning, #contactNumberWarning, #otherInsurerField, #contactPreferences, #termsCheckboxWrapper, #submitButton, #prevStep, #prevStep3").hide();let e=$("#step1"),i=$("#step2"),r=$("#step3"),n=$("#quotePreference"),t=$("#quotePreferenceStep3");$("#step1Icon").addClass("active");let u=$("#prevStep"),o=$("#termsCheckboxWrapper"),s=$("#submitButton"),h=$("#comments"),c=$("label[for='comments']");$("#closeBanner").on("click",function(){$("#cookieConsentBanner").fadeOut()});$("#contactMethod").on("change",function(){let n=$(this).val();n==="Email"?($("#emailField").show(),$("#whatsappField").hide()):n==="WhatsApp"?($("#whatsappField").show(),$("#emailField").hide()):$("#emailField, #whatsappField").hide();SaveFormData()});$("#contactMethodStep3").on("change",function(){let n=$(this).val();n==="Email"?($("#emailFieldStep3").show(),$("#whatsappFieldStep3").hide()):n==="WhatsApp"?($("#whatsappFieldStep3").show(),$("#emailFieldStep3").hide()):$("#emailFieldStep3, #whatsappFieldStep3").hide();SaveFormData()});$(fullName).on("blur",ValidateFullName);$(contactNumber).on("blur",ValidateContactNumber);$(email).on("input",ValidateEmail);$(whatsapp).on("input",ValidateWhatsApp);$(emailStep3).on("blur",ValidateEmailStep3);$(whatsappStep3).on("blur",ValidateWhatsAppStep3);$("#policyDocument").on("blur",ValidateUploadedFile);$("#nextStep").on("click",function(){if(!ValidateFullName()||!ValidateContactNumber()||$("#currentlyInsured").val()===""){alert("Please complete all fields before proceeding.");return}SaveFormData();$(e).hide();$("#currentlyInsured").val()==="Yes"?($(i).show(),f(2)):($(r).show(),f(2))});$("#insurer").on("change",function(){$(this).val()==="Other"?($("#otherInsurerField").show(),$("#uploadPolicyDocumentField").show()):($("#otherInsurerField").hide(),$("#uploadPolicyDocumentField").hide(),$("#otherInsurer").val(""),$("#policyDocument").val(""));SaveFormData()});$(n).on("change",function(){l()});$(t).on("change",function(){l()});$(u).on("click",function(){$(i).is(":visible")?$(i).hide():$(r).is(":visible")&&$(r).hide();$(e).show();f(1)});$("#insuranceQuote").on("submit",function(i){i.preventDefault();let r=!0,u=$("#contactMethod").val(),f=$("#contactMethodStep3").val();if(u==="Email"?r=ValidateEmail():u==="WhatsApp"&&(r=ValidateWhatsApp()),f==="Email3"?r=ValidateEmailStep3():f==="WhatsApp3"&&(r=ValidateWhatsAppStep3()),ValidateUploadedFile()?$("#policyDocumentWarning").hide():($("#policyDocumentWarning").show(),r=!1),$("#termsCheckbox").prop("checked")?$("#termsWarning").hide():($("#termsWarning").show(),r=!1),$("#currentlyInsured").val()==="Yes"?$("#insurer").val()===""?(alert("Please select an insurer."),r=!1):$("#insurer").val()==="Other"&&$("#otherInsurer").val().trim()===""?(alert("Please enter the name of your insurer."),r=!1):$("#policyNumber").val().trim()===""?(alert("Please enter your policy number."),r=!1):$("#coverageType").val()===""?(alert("Please select a coverage type."),r=!1):$("#renewalDate").val().trim()===""?(alert("Please select a renewal date."),r=!1):$(n).val()===""?(alert("Please select an answer."),r=!1):$(n).val()==="Yes"&&$("#contactMethod").val()===""?(alert("Please select a preferred contact method."),r=!1):$(n).val()==="Yes"&&$("#contactTime").val()===""&&(alert("Please select the best time to contact you."),r=!1):$("#noInsuranceReason").val()===""?(alert("Please select a reason for not being insured."),r=!1):$(t).val()==="Yes"&&$("#contactMethodStep3").val()===""?(alert("Please select a preferred contact method."),r=!1):$(t).val()==="Yes"&&$("#contactTimeStep3").val()===""&&(alert("Please select the best time to contact you."),r=!1),r){sessionStorage.removeItem("formData");document.cookie="formData=; path=/; max-age=0";var e=encodeURIComponent($("#fullName").val().trim());window.location.href="/Home/ThankYou?fullName="+e}});RestoreFormData()});