function ShowCookieConsentBanner(){let n=GetCookie("cookieConsent");n&&(n==="accepted"||n==="declined")?$("#cookieConsentBanner").hide():$("#cookieConsentBanner").show()}function AcceptCookies(){document.cookie="cookieConsent=accepted; path=/; max-age=30; SameSite=Lax; Secure";$("#cookieConsentBanner").hide()}function DeclineCookies(){document.cookie="cookieConsent=accepted; path=/; max-age=30; SameSite=Lax; Secure";$("#cookieConsentBanner").hide()}function GetCookie(n){let t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]+)"));return t?t[2]:null}function SaveFormData(){let n={fullName:$("#fullName").val().trim(),contactNumber:$("#contactNumber").val().trim(),currentlyInsured:$("#currentlyInsured").val(),insurer:$("#insurer").val(),otherInsurer:$("#otherInsurer").val().trim(),policyNumber:$("#policyNumber").val().trim(),coverageType:$("#coverageType").val(),renewalDate:$("#renewalDate").val().trim(),noInsuranceReason:$("#noInsuranceReason").val(),quotePreference:$("#quotePreference").val(),contactMethod:$("#contactMethod").val(),email:$("#email").val().trim(),whatsapp:$("#whatsapp").val().trim(),contactTime:$("#contactTime").val().trim(),comments:$("#comments").val().trim(),termsAccepted:$("#termsCheckbox").prop("checked"),quotePreferenceStep3:$("#quotePreferenceStep3").val(),contactMethodStep3:$("#contactMethodStep3").val(),emailStep3:$("#emailStep3").val().trim(),whatsappStep3:$("#whatsappStep3").val().trim(),contactTimeStep3:$("#contactTimeStep3").val().trim(),policyDocument:$("#policyDocument").val().trim(),currentStep:GetCurrentStep(),timestamp:(new Date).getTime()};sessionStorage.setItem("formData",JSON.stringify(n));document.cookie="formData="+encodeURIComponent(JSON.stringify(n))+"; path=/; max-age=30"}function RestoreFormData(){let n=sessionStorage.getItem("formData");if(!n){let t=document.cookie.split(";");t.forEach(t=>{t.trim().startsWith("formData=")&&(n=decodeURIComponent(t.split("=")[1]))})}if(n){let t=JSON.parse(n);$("#fullName").val(t.fullName||"");$("#contactNumber").val(t.contactNumber||"");$("#currentlyInsured").val(t.currentlyInsured||"");$("#insurer").val(t.insurer||"");$("#otherInsurer").val(t.otherInsurer||"");$("#policyNumber").val(t.policyNumber||"");$("#coverageType").val(t.coverageType||"");$("#renewalDate").val(t.renewalDate||"");$("#noInsuranceReason").val(t.noInsuranceReason||"");$("#quotePreference").val(t.quotePreference||"");$("#contactMethod").val(t.contactMethod||"");$("#email").val(t.email||"");$("#whatsapp").val(t.whatsapp||"");$("#contactTime").val(t.contactTime||"");$("#comments").val(t.comments||"");$("#termsCheckbox").prop("checked",t.termsAccepted||!1);$("#quotePreferenceStep3").val(t.quotePreferenceStep3||"");$("#contactMethodStep3").val(t.contactMethodStep3||"");$("#emailStep3").val(t.emailStep3||"");$("#whatsappStep3").val(t.whatsappStep3||"");$("#contactTimeStep3").val(t.contactTimeStep3||"");$("#policyDocument").val(t.policyDocument||"");let i=t.currentStep||1;ShowStep(i)}}function ShowStep(n){$("#step1, #step2, #step3").hide();n===1?$("#step1").show():n===2?$("#step2").show():n===3&&$("#step3").show();UpdateTimeline(n)}function GetCurrentStep(){return $("#step1").is(":visible")?1:$("#step2").is(":visible")?2:$("#step3").is(":visible")?3:1}function CheckSessionExpiration(){let n=sessionStorage.getItem("formData");if(!n){let t=document.cookie.split(";");t.forEach(t=>{t.trim().startsWith("formData=")&&(n=decodeURIComponent(t.split("=")[1]))})}}$("#acceptCookies").on("click",AcceptCookies);$("#declineCookies").on("click",DeclineCookies);ShowCookieConsentBanner();CheckSessionExpiration();